<div class="banking-all" >
  <div class="row row-test">
    <%= render "shared/left_navbar" %>
      <div class="col-9 index-cards index-primary" data-controller="passindex searchcards">
        <div class="circle-fondo-mygroups"></div>
        <div class="options-cards" data-sidebar-target="colorbank">
          <h2 class="title-invitation">Grupos a los que pertenezco</h2>
            <%= form_with url: mygroups_path, method: :get, html: { data: { searchcards_target: "searchcard" } } do |f| %>
              <div class="search-form-control form-group">
                <%= f.text_field :query,
                                  class: "form-control",
                                  value: params[:query],
                                  data: { searchcards_target: "inputsearch", action: "keyup->searchcards#showcards"} %>
                <button class="btn btn-flat">
                  <i class="fas fa-search"></i> Buscar grupo por nombre
                </button>
              </div>
            <% end %>
        </div>
        <div class="container-groups">
          <div class="second-group">
              <lord-icon
                  src="https://cdn.lordicon.com/soseozvi.json"
                  trigger="loop"
                  colors="primary:#ffffff,secondary:#43e5ab"
                  delay="5000"
                  style="width:650px;height:650px">
              </lord-icon>
          </div>
          <div class="first-group">
            <% current_user.group_invitations.each_with_index do |group, num| %>
              <% if group.status.eql?(true) %>
                <div class="group-card p-4 mt-4" style="animation: cardSlide <%= num + 1 - num * 0.75 %>s;">
                  <p>Grupo <strong>'<%= group.group.name %>'</strong> (Invitado por: <span>@<%= group.group.user.username %></span>)</p>
                  <button type="button" class="btn btn-view" data-bs-toggle="modal" data-bs-target="#group<%= group.id %>"> Ver contraseñas </button>
                </div>
                <div class="modal fade" id="group<%= group.id %>" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true" data-backdrop="false">
                    <div class="modal-dialog modal-dialog-centered">
                      <div class="modal-content modal-styles">
                        <div class="d-flex justify-content-between m-header">
                          <h4 class="modal-title" id="exampleModalLabel">Contraseñas del grupo '<%= group.group.name %>'</h4>
                          <button type="button" class="btn close-modal" data-bs-dismiss="modal" aria-label="Close">X</button>
                        </div>
                        <div class="modal-body">
                          <% group.group.passwords.each do |password| %>
                            <div class="dash-card p-3">
                              <p>Sitio: <%= password.site_name %></p>
                              <label for="oculto">Password:</label>
                              <input id="oculto" class="form-control" type="text" value='<%= password.site_password %>' readonly>
                            </div>
                          <% end %>
                        </div>
                      </div>
                    </div>
                  </div>
              <% end %>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  document.title = "Aegis: Grupos a los que perteneces";
</script>
